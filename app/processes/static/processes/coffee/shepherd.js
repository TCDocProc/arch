// Generated by CoffeeScript 1.9.0
(function() {
  window.ARCHShepherd = (function() {
    function ARCHShepherd() {}

    ARCHShepherd.prototype.init = function() {
      return setTimeout(this.setupShepherd, 300);
    };

    ARCHShepherd.prototype.setupShepherd = function() {
      this.shepherd = new Shepherd.Tour({
        defaults: {
          classes: 'shepherd-element shepherd-open shepherd-theme-default',
          showCancelLink: true
        }
      });
      this.shepherd.on('cancel', function() {
        return $.mask.close();
      });
      this.shepherd.addStep('step1', {
        title: 'Hi There!',
        text: ['This is a little guide to show you how this system works.', 'This system tells you more about what has, is and will happen in your healthcare journey.'],
        attachTo: {
          element: '.content > .branch > .sequence',
          on: 'bottom'
        },
        classes: 'shepherd shepherd-open shepherd-theme-default shepherd-transparent-text',
        buttons: [
          {
            text: 'Exit',
            classes: 'shepherd-button-secondary',
            action: this.shepherd.cancel
          }, {
            text: 'Next',
            action: this.shepherd.next,
            classes: 'shepherd-button-example-primary'
          }
        ],
        when: {
          show: function() {
            return $(".content > .branch > .sequence").expose({
              closeOnClick: false,
              closeOnEsc: false,
              color: 'black'
            });
          }
        }
      });
      this.shepherd.addStep('step2', {
        text: ['This box is what we call a “Pathway”. It’s a list showing all the steps in your treatment for a particular condition with the oldest at the top and the furthest in the future at the bottom.', 'Click on this one to see the details.'],
        attachTo: {
          element: '.content > .branch > .sequence',
          on: 'bottom'
        },
        classes: 'shepherd shepherd-open shepherd-theme-default shepherd-transparent-text',
        buttons: [
          {
            text: 'Exit',
            classes: 'shepherd-button-secondary',
            action: this.shepherd.cancel
          }, {
            text: 'Next',
            action: this.shepherd.next,
            classes: 'shepherd-button-example-primary'
          }
        ],
        when: {
          'before-hide': function() {
            if (!$("#minimap :first-child").is(":visible")) {
              return $(".content > .branch > .sequence:nth-child(2)").click();
            }
          }
        },
        advanceOn: {
          selector: '.content > .branch > .sequence *',
          event: 'click'
        }
      });
      this.shepherd.addStep('step3', {
        title: 'The Steps in a Pathway',
        text: 'Each of these boxes represents a step in your treatment, click all the way into one to see the detail pop up. If steps are side by side, that means they can be done at the same time.',
        attachTo: {
          element: '.content > .branch > .sequence',
          on: 'right'
        },
        classes: 'shepherd shepherd-open shepherd-theme-default shepherd-transparent-text',
        buttons: [
          {
            text: 'Exit',
            classes: 'shepherd-button-secondary',
            action: this.shepherd.cancel
          }, {
            text: 'Next',
            action: this.shepherd.next,
            classes: 'shepherd-button-example-primary'
          }
        ]
      });
      this.shepherd.addStep('step4', {
        title: 'Your Colour Guide',
        text: 'This guide at the top left shows you what the colours of each of the steps mean, as you can see blue’s the most important as it shows you whats happening to you right now',
        attachTo: {
          element: '.pushy-item:nth-child(3)',
          on: 'right'
        },
        classes: 'shepherd shepherd-open shepherd-theme-default shepherd-transparent-text',
        buttons: [
          {
            text: 'Exit',
            classes: 'shepherd-button-secondary',
            action: this.shepherd.cancel
          }, {
            text: 'Next',
            action: this.shepherd.next,
            classes: 'shepherd-button-example-primary'
          }
        ],
        when: {
          show: function() {
            $.mask.close();
            return setTimeout(function() {
              return $(".pushy").expose({
                closeOnClick: false,
                closeOnEsc: false,
                color: 'black'
              });
            }, 500);
          }
        }
      });
      this.shepherd.addStep('step5', {
        title: 'Minimap and Going Home',
        text: ['As you can see this map shows where you are in any specific treatment pathway. No matter how deep you get you can always click this to go back to the top.', 'You can also click "YourPathways" to go back home, try it!'],
        attachTo: {
          element: '#minimap',
          on: 'right'
        },
        classes: 'shepherd shepherd-open shepherd-theme-default shepherd-transparent-text',
        buttons: [
          {
            text: 'Exit',
            classes: 'shepherd-button-secondary',
            action: this.shepherd.cancel
          }, {
            text: 'Next',
            action: this.shepherd.next,
            classes: 'shepherd-button-example-primary'
          }
        ],
        advanceOn: 'li.name click'
      });
      this.shepherd.addStep('step6', {
        title: 'Well Done!',
        text: ['You now have the power to fully understand your healthcare and know what’s happening to you at all times.', 'If you see anything here that interests you, don’t be afraid to contact your healthcare professional and ask them for further information.', 'Now go explore!'],
        classes: 'shepherd shepherd-open shepherd-theme-default shepherd-transparent-text',
        buttons: [
          {
            text: 'Done',
            action: this.shepherd.next,
            classes: 'shepherd-button-example-primary'
          }
        ],
        when: {
          show: function() {
            return $.mask.close();
          }
        }
      });
      return this.shepherd.start();
    };

    return ARCHShepherd;

  })();

}).call(this);
